<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Resume Builder</title>
  <style>
    /* ... (existing styles remain unchanged) ... */

    /* Hide/show columns based on layout */

  /* existing styles... */
  input{
    border: rgb(6, 6, 6);
    box-shadow: 1px 1px 1px 0.5 black;
  }
  .section p,
  .section li {
    white-space: normal;
    word-wrap: break-word;
    margin-bottom: 8px;
    line-height: 1.5;
    font-size: 14px;
  }

  .section h3 {
    border-bottom: 1px solid #ccc;
    padding-bottom: 4px;
    margin-bottom: 10px;
  }

  .section {
    margin-top: 25px;
  }
     :root {
      --main-color: #2c3e50;
    }

    body {
      font-family: Arial, sans-serif;
      background: #888b90;
      margin: 0;
      display: flex;
      justify-content: center;
      text-shadow:1px #2c3e50;
    }

    .container {
      display: flex;
      flex-wrap: wrap;
      gap: 40px;
      margin-left: 20%;
      margin-right: 20%;
      max-width: 1200px;
      width: 100%;
    }

    .form-section {
      flex: 1;
      min-width: 300px;
      background: #fff;
      padding: 20px;
      padding-right: 10%;
      border-radius: 12px;
      box-shadow: 2px 3px 10px rgba(0,0,0,0.1);
    }

    input
    {
       width: 100%;
      padding: 8px;
      margin-top: 5px;
      margin-bottom: 10px;
      border-radius: 6px;
      border: 2px solid #0e0d0d;
    } textarea, select {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      margin-bottom: 10px;
      border-radius: 6px;
      border: 2px solid #0e0d0d;
    }

    button {
      margin-top: 10px;
      padding: 8px 12px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    /*.preview-section {
      flex: 2;
      min-width: 400px;
      max-height: 500px;
    }*/

    .resume {
      background: white;
      border-radius: 12px;
      overflow:visible;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .resume.two-column {
      display: flex;
    }

    .resume.one-column {
      display: block;
    }

    .left-column ,.center-column,.one-column-header{
      background: var(--main-color, #2c3e50);
      color: white;
      padding: 20px;
      text-align: center;
    }

    .resume.two-column .left-column {
      width: 35%;
    }

    .resume.one-column .left-column {
      display: none;
    }

    .right-column {
      padding: 20px;
    }

    .resume.two-column .right-column {
      width: 65%;
    }

    .left-column img,
    .one-column-header img {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid white;
      margin-bottom: 10px;
    }

    .section {
      margin-top: 20px;
    }

    .section ul {
      list-style: disc;
      margin-left: 20px;
    }

    .skill-bar {
      margin: 8px 0;
      border: black;
    }

    .skill-label {
      font-weight: bold;
    }

    .skill-bar-fill {
      height: 8px;
      border-radius: 4px;
      background: #3498db;
      margin-top: 4px;
    }

    /* One-column top layout */
    .one-column .top-section.one-column-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: var(--main-color, #2c3e50);
      color: white;
      padding: 20px;
      flex-wrap: wrap;
      gap: 10px;
    }

    .one-column .top-section.one-column-header h1 {
      flex: 1;
      text-align: center;
      margin: 0;
      font-size: 24px;
    }
    .section ul li, .section p {
  margin-bottom: 8px;
  line-height: 1.5;
}
    #preview {
  display: block;
  background: white;
  padding: 20px;
  color: black;
}
    .one-column .top-section.one-column-header .contact-info {
      text-align: right;
      min-width: 180px;
    }
    .one-column .left-column {
      display: none;
    }
    .one-column .center-column
    {
      display: none;
    }
    
    .two-column .one-column-header {
      display: none;
    }
     .two-column .center-column
     {
      display: none;
     }
     .three-column .left-column
     {
      display: none;
     }
     .three-column .one-column-header
     {
      display: none;
     }
    .resume.one-column .one-column-header {
      display: flex;
    }
    /* Smooth transition on layout switch 
.resume {
  transition: all 0.3s ease;
}*/

/* Profile image styling */
.center-column img{
  width: 100px;
  height: 100px;
  object-fit: cover;
  border-radius: 50%;
  border: 3px solid white;
  margin-bottom: 10px;
margin-top: 3%;
margin-left: 42%;

}
.left-column img{
   width: 100px;
  height: 100px;
  object-fit: cover;
  border-radius: 50%;
  border: 3px solid white;
  margin-bottom: 10px;
  margin-left: 30%;
}
.one-column-header img {
  width: 100px;
  height: 100px;
  object-fit: cover;
  border-radius: 50%;
  border: 3px solid white;
  margin-bottom: 10px;
}

/* Section titles */
.section h3 {
  font-size: 18px;
  color: var(--main-color);
  text-transform: uppercase;
  margin-bottom: 10px;
  border-bottom: 1px solid #ddd;
  padding-bottom: 5px;
}

/* Skill bar enhancements */
.skill-bar {
  margin: 10px 0;
  border: black;
}
.skill-label {
  font-weight: 500;
  margin-bottom: 4px;
}
.skill-bar-fill {
  background-color:  var(--main-color, #2c3e50);
  height: 8px;
  border-radius: 5px;
}

/* Contact info inside columns */
.contact-info p {
  margin: 4px 0;
  font-size: 13px;
}
#resumePreview {
  width: 800px; /* or 794px for A4 pixel width at 96dpi */
  margin: 0 auto;
  min-height: 1123px;
  background-color: white;
  position: relative;
  height: auto;
  box-sizing: border-box;
}
/* Responsive tweak */
@media (max-width: 768px) {
  .container {
    flex-direction: column;
  }
  .form-section,
  .preview-section {
    width: 100%;
  }
}
/* Button enhancements */
button {
  transition: background 0.3s ease;
  box-shadow:2px 2px 2px #2c3e50;
  background-color:  var(--main-color, #1c65ae);
  color: #f2f2f2;
}
button:hover {
  background-color: #2980b9;
}
  </style>
</head>
<body>
<div class="container">
  <!-- Form Section -->
  <!-- ... (form code unchanged) ... -->
   <div class="form-section">
    <h2>Resume Builder</h2>

    <label>Choose Layout:
      <select id="layoutSelector" onchange="switchLayout()">
        <option value="two-column">Two Column</option>
        <option value="one-column">One Column</option>
        <option value="three-column">three Column</option>
      </select>
    </label>
     <!--<label>Template</label>
     <select id="templateSelector" onchange="templateSelector()">
      <option value="modern">Modern</option>
      <option value="classic">Classic</option>
      <option value="elegant">Elegant</option>
     </select>-->
    <label>Choose Theme Color:
      <input type="color" id="colorPicker" onchange="updateThemeColor()" value="#2c3e50" />
    </label>

    <label>Full Name: <input type="text" id="nameInput" oninput="updatePreview()"></label>
    <label>Email: <input type="email" id="emailInput" oninput="updatePreview()"></label>
    <label>Phone: <input type="tel" id="phoneInput" oninput="updatePreview()"></label>
    <label>LinkedIn: <input type="url" id="linkedinInput" oninput="updatePreview()"></label>
    <label>GitHub: <input type="url" id="githubInput" oninput="updatePreview()"></label>
    <label>Profile Image (Optional): <input type="file" id="imageInput" accept="image/*"></label>

    <label>Summary:</label>
    <textarea id="summaryInput" rows="1" placeholder="Brief summary about yourself" oninput="updatePreview()"></textarea>

    <div id="skillsContainer"><label>Skills:</label></div>
    <button type="button" onclick="addSkill()">+ Add Skill</button>

    <div id="educationContainer"><label>Education:</label></div>
    <button type="button" onclick="addEducation()">+ Add Education</button>

    <div id="experienceContainer"><label>Work Experience:</label></div>
    <button type="button" onclick="addExperience()">+ Add Experience</button>

    <div id="projectContainer"><label>Projects:</label></div>
    <button type="button" onclick="addProject()">+ Add Project</button>

    <div id="internshipContainer"><label>Internships:</label></div>
    <button type="button" onclick="addInternship()">+ Add Internship</button>

    <div id="interestContainer"><label>Interests:</label></div>
    <button type="button" onclick="addInterest()">+ Add Interest</button>
    <button type="button" onclick="clearForm()">ðŸ—‘ Clear Form</button>

    <button type="button" id="download-btn" onclick="downloadResume()">Download PDF</button>
  </div>

  <!-- Preview Section -->
  <div class="preview-section" id="resumePreview">
    <div class="resume two-column" id="resumeContent">
      
      <!-- One Column Header (visible only in one-column layout) -->
      <div class="top-section one-column-header">
        <img id="profileImage" src="" alt="Profile Photo" style="display:none;">
        <h1 id="namePreview">Your Name</h1>
        <div class="contact-info">
          <p id="emailPreview"></p>
          <p id="phonePreview"></p>
          <p id="linkedinPreview"></p>
          <p id="githubPreview"></p>
        </div>
      </div>

      <!-- Left Column (visible only in two-column layout) -->
      <div class="left-column" id="leftColumn">
        <img id="profileImageClone" src="" alt="Profile Photo" style="display:none;">
        <h1 id="namePreviewClone">Your Name</h1>
        <div class="contact-info">
          <p id="emailPreviewClone"></p>
          <p id="phonePreviewClone"></p>
          <p id="linkedinPreviewClone"></p>
          <p id="githubPreviewClone"></p>
        </div>
      </div>

      <div  style="text-align: center;" class="center-column" id="center">
        <img id="profileImageC" src="" alt="Profile Photo" style="display:none;">
        <h1 id="namePreviewC">Your Name</h1>
        <div class="contact-info">
          <span id="emailPreviewC"></span>
          <span id="phonePreviewC"></span>
          <span id="linkedinPreviewC"></span>
          <span id="githubPreviewC"></span>
        </div>
      </div>
      

         <div class="right-column">
        <div class="section" id="summarySection">
          <h3>Summary</h3>
          <p id="summaryPreview"></p>
        </div>

        <div class="section"><h3>Skills</h3><div id="skillsPreview"></div></div>
        <div class="section" id="educationSection"><h3>Education</h3><ul id="educationPreview"></ul></div>
        <div class="section" id="experienceSection"><h3>Work Experience</h3><ul id="experiencePreview"></ul></div>
        <div class="section" id="projectSection"><h3>Projects</h3><ul id="projectPreview"></ul></div>
        <div class="section" id="internshipSection"><h3>Internships</h3><ul id="internshipPreview"></ul></div>
        <div class="section" id="interestSection"><h3>Interests</h3><ul id="interestPreview"></ul></div>
      </div>
      </div>
    </div>
  </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  const limitSkills = 20;
let skillCount = 0;

function addSkill() {
  if (skillCount >= limitSkills) return;
  const container = document.getElementById('skillsContainer');
  const input = document.createElement('input');
  input.placeholder = 'Skill:Percentage (e.g. HTML:90)';
  input.className = 'skill-input';
  input.addEventListener('input', updatePreview);
  container.appendChild(input);
  skillCount++;
  updatePreview();
}
function addField(containerId, className, placeholder) {
  const container = document.getElementById(containerId);
  const input = document.createElement('input');
  input.placeholder = placeholder;
  input.className = className;
  input.addEventListener('input', updatePreview);
  container.appendChild(input);
}

function addEducation() { addField('educationContainer', 'edu-input', 'Your education detail'); }
function addExperience() { addField('experienceContainer', 'exp-input', 'Your work experience'); }
function addProject() { addField('projectContainer', 'proj-input', 'Project detail'); }
function addInternship() { addField('internshipContainer', 'intern-input', 'Internship detail'); }
function addInterest() { addField('interestContainer', 'interest-input', 'Interest'); }

function previewListFromInputs(className, previewId, sectionId) {
  const list = document.getElementById(previewId);
  const section = document.getElementById(sectionId);
  list.innerHTML = '';
  const values = Array.from(document.querySelectorAll('.' + className))
                      .map(input => input.value.trim())
                      .filter(val => val);
  values.forEach(val => {
    const li = document.createElement('li');
    li.textContent = val;
    list.appendChild(li);
  });
  section.style.display = values.length ? 'block' : 'none';
}

function updatePreview() {
  const name = document.getElementById('nameInput').value || 'Your Name';
  const email = document.getElementById('emailInput').value;
  const phone = document.getElementById('phoneInput').value;
  const linkedin = document.getElementById('linkedinInput').value;
  const github = document.getElementById('githubInput').value;

  // Update One-Column Header
  document.getElementById('namePreview').textContent = name;
  document.getElementById('emailPreview').textContent = email ? 'Email: ' + email : '';
  document.getElementById('phonePreview').textContent = phone ? 'Phone: ' + phone : '';
  document.getElementById('linkedinPreview').textContent = linkedin ? 'LinkedIn: ' + linkedin : '';
  document.getElementById('githubPreview').textContent = github ? 'GitHub: ' + github : '';

  // Update Two-Column Left
  document.getElementById('namePreviewClone').textContent = name;
  document.getElementById('emailPreviewClone').textContent = email ? 'Email: ' + email : '';
  document.getElementById('phonePreviewClone').textContent = phone ? 'Phone: ' + phone : '';
  document.getElementById('linkedinPreviewClone').textContent = linkedin ? 'LinkedIn: ' + linkedin : '';
  document.getElementById('githubPreviewClone').textContent = github ? 'GitHub: ' + github : '';
  //three
  document.getElementById('namePreviewC').textContent = name;
  document.getElementById('emailPreviewC').textContent = email ? 'Email: ' + email : '';
  document.getElementById('phonePreviewC').textContent = phone ? 'Phone: ' + phone : '';
  document.getElementById('linkedinPreviewC').textContent = linkedin ? 'LinkedIn: ' + linkedin : '';
  document.getElementById('githubPreviewC').textContent = github ? 'GitHub: ' + github : '';


  // Update all other sections (unchanged logic)
   const summary = document.getElementById('summaryInput').value.trim();
  document.getElementById('summaryPreview').textContent = summary;
  document.getElementById('summarySection').style.display = summary ? 'block' : 'none';

  const skillsPreview = document.getElementById('skillsPreview');
  skillsPreview.innerHTML = '';
  document.querySelectorAll('.skill-input').forEach(input => {
    const [skill, percent] = input.value.split(':').map(s => s.trim());
    if (skill && percent) {
      const div = document.createElement('div');
      div.className = 'skill-bar';
      div.innerHTML = `<div class="skill-label"> ${skill} (${percent}%)</div><div class="skill-bar-fill" style="width:${percent}%"></div>`;
      skillsPreview.appendChild(div);
    }
  });

  previewListFromInputs('edu-input', 'educationPreview', 'educationSection');
  previewListFromInputs('exp-input', 'experiencePreview', 'experienceSection');
  previewListFromInputs('proj-input', 'projectPreview', 'projectSection');
  previewListFromInputs('intern-input', 'internshipPreview', 'internshipSection');
  previewListFromInputs('interest-input', 'interestPreview', 'interestSection');
}

function switchLayout() {
  const selected = document.getElementById("layoutSelector").value;
  const resume = document.getElementById("resumeContent");
  resume.classList.remove("one-column", "two-column");
  resume.classList.add(selected);
  updateLayoutVisibility();
}

function updateLayoutVisibility() {
  const layout = document.getElementById("layoutSelector").value;
  document.querySelector('.one-column-header').style.display = layout === 'one-column' ? 'flex' : 'none';
  document.querySelector('.left-column').style.display = layout === 'two-column' ? 'block' : 'none';
  document.querySelector('.center-column').style.display = layout === 'three-column' ? 'block' : 'none';
}

document.getElementById('layoutSelector').addEventListener('change', () => {
  switchLayout();
});

document.getElementById('imageInput').addEventListener('change', function(e) {
  const file = e.target.files[0];
  const img1 = document.getElementById('profileImage');
  const img2 = document.getElementById('profileImageClone');
  const img3 = document.getElementById('profileImageC');
  if (file) {
    const reader = new FileReader();
    reader.onload = function(evt) {
      img1.src = evt.target.result;
      img1.style.display = 'block';
      img2.src = evt.target.result;
      img2.style.display = 'block';
      img3.src = evt.target.result;
      img3.style.display = 'block';
    };
    reader.readAsDataURL(file);
  } else {
    img1.style.display = 'none';
    img2.style.display = 'none';
    img3.style.display = 'none';
  }
});
function clearForm() {
  // Clear all text inputs and textareas
  document.querySelectorAll('input[type="text"], input[type="email"], input[type="tel"], input[type="url"], textarea').forEach(input => {
    input.value = '';
  });

  // Clear dynamic skill inputs
  document.querySelectorAll('.skill-input, .edu-input, .exp-input, .proj-input, .intern-input, .interest-input').forEach(el => el.remove());
  skillCount = 0;

  // Reset image preview
  document.getElementById('profileImage').style.display = 'none';
  document.getElementById('profileImageClone').style.display = 'none';
  document.getElementById('profileImageC').style.display = 'none';
  document.getElementById('profileImage').src = '';
  document.getElementById('profileImageClone').src = '';
  document.getElementById('profileImageC').src = '';

  // Reset name and layout
  document.getElementById('nameInput').value = '';
  document.getElementById('namePreview').textContent = 'Your Name';
  document.getElementById('namePreviewClone').textContent = 'Your Name';
   document.getElementById('namePreviewC').textContent = 'Your Name';

  // Re-run preview update
  updatePreview();
}/*
document.getElementById('download-btn').addEventListener('click', () => {
 updatePreview();
 const preview = document.getElementById('resumePreview');
 html2canvas(preview, { scale: 2 }).then(canvas => {
 const imgData = canvas.toDataURL('image/png');
 const pdf = new jspdf.jsPDF('p', 'mm', 'a4');
 const imgProps = pdf.getImageProperties(imgData);
 const pdfWidth = 200;
 const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;
 pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
 pdf.save('resume.pdf');
 });});*/

 /*
 document.getElementById('download-btn').addEventListener('click', () => {
  updatePreview();
  const preview = document.getElementById('resumePreview');

  html2canvas(preview, { scale: 2 }).then(canvas => {
    const imgData = canvas.toDataURL('image/png');
    const pdf = new jspdf.jsPDF('p', 'mm', 'a4');

    const pdfWidth = pdf.internal.pageSize.getWidth();
    const pdfHeight = pdf.internal.pageSize.getHeight();

    const imgWidth = canvas.width;
    const imgHeight = canvas.height;
    const ratio = imgWidth / imgHeight;

    const canvasAspectRatio = imgWidth / imgHeight;
    const pdfAspectRatio = pdfWidth / pdfHeight;

    const scaledHeight = pdfWidth / canvasAspectRatio;
    let heightLeft = scaledHeight;
    let position = 0;

    // If image height fits one page, just add it
    if (scaledHeight <= pdfHeight) {
      pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, scaledHeight);
    } else {
      // Add multiple pages
      while (heightLeft > 0) {
        pdf.addImage(imgData, 'PNG', 0, position, pdfWidth, scaledHeight);
        heightLeft -= pdfHeight;
        position -= pdfHeight;

        if (heightLeft > 0) pdf.addPage();
      }
    }

    pdf.save('resume.pdf');
  });
});*/
document.getElementById('download-btn').addEventListener('click', () => {
  updatePreview();

  const preview = document.getElementById('resumePreview');

  html2canvas(preview, { scale: 2 }).then(canvas => {
    const imgData = canvas.toDataURL('image/png');
    const pdf = new jspdf.jsPDF('p', 'mm', 'a4');

    const pdfWidth = pdf.internal.pageSize.getWidth();
    const pdfHeight = pdf.internal.pageSize.getHeight();

    const imgProps = pdf.getImageProperties(imgData);
    const imgWidth = imgProps.width;
    const imgHeight = imgProps.height;

    const ratio = imgWidth / imgHeight;
    const finalHeight = pdfWidth / ratio;

    pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, finalHeight);
    pdf.save('resume.pdf');
  });
});

function templateSelector(){
 const selected = templateSelector.value;
 const preview = document.getElementById('resumePreview');
 preview.className = 'resumePreview ' + selected;
}
function updateThemeColor()
{
  const color=document.getElementById("colorPicker").value;
  document.documentElement.style.setProperty("--main-color",color)
}
/*function downloadResume()
{
  const element=document.getElementById('resumePreview');
  html2canvas(element).then(canvas=>{
    const link=document.createElement('a');
    link.download='resume.pdf';
    link.href=canvas.toDataURL();
    link.click();
  });
}
function downloadResume() {
  const preview = document.getElementById('resumepreview');

  const opt = {
    margin:       0,
    filename:     'resume.pdf',
    image:        { type: 'jpeg', quality: 0.98 },
    html2canvas:  { scale: 2 },
    jsPDF:        { unit: 'in', format: 'letter', orientation: 'portrait' }
  };

  html2pdf().set(opt).from(preview).save();
}*/
// Optional: call this on load to ensure correct visibility
window.onload = () => {
  updateLayoutVisibility();
  updatePreview();
};
</script>
</body>
</html>
